{
   "openapi": "3.0.3",
   "info": {
      "title": "MyApi Documentation",
      "description": "MyAPi Documentation with all specifications",
      "version": "1.0.0",
      "contact": {
         "name": "Yan",
         "email": "yanlucascarvalho18@gmail.com"
      }
   },

   "paths": {
      "/roles": {
         "post": {
              "tags": ["Roles"],
              "summary": "Create a role",
              "description": "Create a new role",
              "requestBody": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "type": "object",
                            "properties": {
                              "name": {
                                 "type": "string"
                              }
                            }
                        }
                     }
                  }
              },
              "responses": {
                  "201": {
                     "description": "Role created.",
                     "content": {
                        "application/json": {
                           "schema": {
                              "type": "object",
                              "properties": {
                                 "id": {
                                    "type": "string"
                                 },

                                 "name": {
                                    "type": "string"
                                 },

                                 "created_at": {
                                    "type": "string"
                                 }

                              }
                           }
                        }
                     }
                  },

                  "400": {
                     "description": "Role already exists"
                  }
              }


         },

         "get": {
            "tags": ["Roles"],
            "summary": "List all roles",
            "description": "Return all roles paginated.",
            "parameters": [
               {
                  "name": "page",
                  "in": "query",
                  "description": "Number of the page",
                  "required": false,
                  "schema": {
                     "type": "number",
                     "example": "page=1"
                  },
                  "style": "label"
               },

               {
                  "name": "limit",
                  "in": "query",
                  "description": "Maximum number of records per page",
                  "required": false,
                  "schema": {
                     "type": "number",
                     "example": "limit=3"
                  },
                  "style": "label"
               }
            ],
            "responses": {
               "200": {
                  "description": "Success.",
                  "content": {
                     "application/json": {
                        "example": {
                           "per_page": 3,
                           "total": 5,
                           "current_page": 1,
                           "data": [
                              {
                                 "id": "900d465c-9afd-404e-bccb-04f7f2004b66",
                                 "name": "Users",
                                 "created_at": "2024-01-20T17:42:21.701Z"
                             },

                             {
                                 "id": "a87f01c6-60a7-4c37-aacc-6bde01ddeaf6",
                                 "name": "Admin",
                                 "created_at": "2024-01-25T16:21:24.495Z"
                             }
                           ]
                        }
                     }
                  }
               }
            }
         }
      },

      "/roles/{id}": {
         "put": {
            "tags": ["Roles"],
            "summary": "Update a role",
            "description": "Update a role by id",
            "parameters": [
               {
                  "name": "id",
                  "in": "path",
                  "description": "identify of a role",
                  "required": true,
                  "schema": {
                     "type": "string"
                  },
                  "style": "label"
               }

            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "properties": {
                            "name": {
                              "type": "string"
                            }
                        },
                        "example": "Administrator"
                     }
                  }
               }
            },
            "responses": {
               "200": {
                  "description": "Success.",
                  "content": {
                     "application/json": {
                        "schema": {
                           "type": "object",
                           "properties": {
                              "id": {
                                 "type": "string"
                              },
                               "name": {
                                 "type": "string"
                               },

                               "created_at": {
                                 "type": "string"
                               }
                           }
                        },

                        "example": {
                           "message": "role updated",
                           "updateRole": {
                              "id": "900d465c-9afd-404e-bccb-04f7f2004b66",
                              "name": "Administrator",
                              "created_at": "2024-01-20T17:42:21.701Z"
                           }
                        }
                     }
                  }
               },

               "400": {
                  "description": "Bad Request."
               },
               "404": {
                  "description": "Role not found"
               }
            }
         },

         "get": {
            "tags": ["Roles"],
            "summary": "Find role by ID",
            "description": "Returns roles based on ID",
            "parameters": [
               {
                  "name": "id",
                  "in": "path",
                  "description": "identify of a role",
                  "required": true,
                  "schema": {
                     "type": "string"
                  },
                  "style": "label"
               }

            ],

            "responses": {
               "200": {
                  "description": "Success.",
                  "content": {
                     "application/json": {
                        "schema": {
                           "type": "object",
                           "properties": {
                              "id": {
                                 "type": "string"
                              },
                               "name": {
                                 "type": "string"
                               },

                               "created_at": {
                                 "type": "string"
                               }
                           }
                        },
                        "example": {
                           "id": "900d465c-9afd-404e-bccb-04f7f2004b66",
                           "name": "Administrator",
                           "created_at": "2024-01-20T17:42:21.701Z"
                        }
                     }
                  }
               },

               "400": {
                  "description": "Bad Request."
               },
               "404": {
                  "description": "Role not found"
               }
            }
         },

         "delete": {
            "tags": ["Roles"],
            "summary": "Delete role by ID",
            "description": "Delete roles based on ID",
            "parameters": [
               {
                  "name": "id",
                  "in": "path",
                  "description": "identify of a role",
                  "required": true,
                  "schema": {
                     "type": "string"
                  },
                  "style": "label"
               }

            ],

            "responses": {
               "204": {
                  "description": "No content."
               },

               "400": {
                  "description": "Bad Request."
               },
               "404": {
                  "description": "Role not found"
               }
            }
         }
      },

      "/users": {
         "post":  {
            "tags": ["Users"],
            "summary": "Create a user",
            "description": "Create a new user with name, email, password, isAdmin, roleId",
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "type": "object",
                        "properties": {
                           "name": {
                              "type": "string"
                           },

                           "email": {
                              "type": "string"
                           },

                           "password": {
                              "type": "string"
                           },

                           "isAdmin": {
                              "type": "boolean"
                           },

                           "roleId": {
                              "type": "string"
                           }
                        }
                     }
                  }
               }
            },

            "responses": {
               "201": {
                  "description": "User created",
                  "content": {
                     "application/json": {
                        "schema": {
                           "type": "object",
                           "properties": {
                              "message": {
                                 "type": "string"
                              },

                              "id": {
                                 "type": "string"
                              },

                              "name": {
                                 "type": "string"
                              },

                              "email": {
                                 "type": "string"
                              },

                              "password": {
                                 "type": "string"
                              },

                              "isAdmin": {
                                 "type": "boolean"
                              },

                              "roleId": {
                                 "type": "string"
                              },

                              "created_at": {
                                 "type": "string"
                              }
                           },

                           "example": {
                              "message": "User created",
                              "user": {
                                  "id": "b96b7746-ae90-413e-9829-bf909f355fa7",
                                  "name": "Igor",
                                  "email": "igor@gmail.com",
                                  "isAdmin": true,
                                  "role": {
                                      "id": "c8be778c-3e8a-4fec-96cf-22ce6cc53e11",
                                      "name": "admin",
                                      "created_at": "2024-02-13T20:41:55.498Z"
                                  },
                                  "created_at": "2024-02-14T13:22:03.766Z"
                              }
                           }
                        }
                     }
                  }
               },

               "400": {
                  "description": "Email address already used."
               },

               "401": {
                  "description": "Invalid authentication token"
               },

               "404": {
                  "description": "Role not found"
               }
            }
         }
      }
   }
}
